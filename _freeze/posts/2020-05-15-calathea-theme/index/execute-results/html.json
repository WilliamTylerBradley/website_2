{
  "hash": "e6c781ab6e8a98a4ed79c762fd7a134e",
  "result": {
    "markdown": "---\ntitle: 'Calathea Theme'\ndescription: \"An elegant theme for growth and flow.\"\ndate: \"2020-05-15\"\ncategories: [Blog]\nimage: \"icon_thumbnail.png\"\nexecute: \n  eval: false\n---\n\n\nThis post goes through the work for the Calathea color scheme. I assembled this color scheme because having the code syntax highlighting on my website mismatching the rest of the site design annoyed me. That resulted in a RStudio theme. You can check out the project [here](https://github.com/WilliamTylerBradley/Calathea).\n\n::: {style=\"display: grid; grid-template-columns: 1fr 1fr; align-items: center; grid-column-gap: 10px; align-items: start;\"}\n<div>\n\nThe base of the color scheme comes from the [Calathea genus](https://en.wikipedia.org/wiki/Calathea), which is a popular houseplant. I picked the colors by pulling them from searching [Google](https://www.google.com/search?as_st=y&tbm=isch&as_q=calathea) or pictures I had. These were images downloaded from the web, and then the colors were picked using the Paint app on Windows 10. Any color picker in a browser or app will probably work. I saved all of the base colors as hex codes in a [csv](https://github.com/WilliamTylerBradley/Calathea/blob/main/Calathea.csv). I played around with the colors by using [color-hex.com](https://www.color-hex.com/). Inputting a hex color here will give you several variations on shades, tints, and monochromatic colors. These options are useful when I wanted something a little brighter or darker.\n\n</div>\n\n<div>\n\n![My Calathea Medallion](calathea.JPG)\n\n</div>\n:::\n\nI tested out the colors by making an icon image. The icon was mostly for fun but did produce a suitable code file to test out the colors in RStudio. There are three different versions, one for each background. The code to create them can be found [here](https://github.com/WilliamTylerBradley/Calathea/blob/main/r_code/icon.R).\n\n</br>\n\n::: {style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(175px, 1fr)); align-items: center; grid-column-gap: 10px; \"}\n<div>\n\n![base background](icon.png)\n\n</div>\n\n<div>\n\n![selection/highlight](icon_highlight.png)\n\n</div>\n\n<div>\n\n![R Markdown chunk](icon_chunk.png)\n\n</div>\n:::\n\nThe foreground/background contrasts were determined to see if they passed WCAG AA standards for normal text. All the foreground colors have at least a 4.5:1 contrast with all the background colors.\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; \"><table class=\"table\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Feature </th>\n   <th style=\"text-align:left;\"> Color </th>\n   <th style=\"text-align:right;\"> Base Background </th>\n   <th style=\"text-align:right;\"> Selection/Highlight </th>\n   <th style=\"text-align:right;\"> R markdown chunk </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Code </td>\n   <td style=\"text-align:left;\"> White </td>\n   <td style=\"text-align:right;\"> 13.50 </td>\n   <td style=\"text-align:right;\"> 11.05 </td>\n   <td style=\"text-align:right;\"> 15.32 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Comment </td>\n   <td style=\"text-align:left;\"> Purple </td>\n   <td style=\"text-align:right;\"> 5.66 </td>\n   <td style=\"text-align:right;\"> 4.63 </td>\n   <td style=\"text-align:right;\"> 6.42 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Keyword Contants </td>\n   <td style=\"text-align:left;\"> Pink </td>\n   <td style=\"text-align:right;\"> 10.97 </td>\n   <td style=\"text-align:right;\"> 8.99 </td>\n   <td style=\"text-align:right;\"> 12.45 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Keyword Functions </td>\n   <td style=\"text-align:left;\"> Green </td>\n   <td style=\"text-align:right;\"> 5.51 </td>\n   <td style=\"text-align:right;\"> 4.51 </td>\n   <td style=\"text-align:right;\"> 6.25 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Number </td>\n   <td style=\"text-align:left;\"> Dull </td>\n   <td style=\"text-align:right;\"> 8.81 </td>\n   <td style=\"text-align:right;\"> 7.22 </td>\n   <td style=\"text-align:right;\"> 10.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> String </td>\n   <td style=\"text-align:left;\"> Yellow </td>\n   <td style=\"text-align:right;\"> 11.81 </td>\n   <td style=\"text-align:right;\"> 9.67 </td>\n   <td style=\"text-align:right;\"> 13.40 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n\nI originally shot for AAA, but I couldn't get that working while having the foreground colors stand apart from each other. The code to determine the contrast values is [here](https://github.com/WilliamTylerBradley/Calathea/blob/main/r_code/contrasts.R).\n\nI also attempted to check color-blindness compatibilities using this [simulator](https://www.color-blindness.com/coblis-color-blindness-simulator/) from color-blindness.com. These colors look ok but might need improvement for monochrome.\n\n::: {style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(175px, 1fr)); align-items: center; grid-column-gap: 10px; \"}\n<div>\n\n![base colors](color_test_raw.png)\n\n</div>\n\n<div>\n\n![deuteranopia](color_test_deuteranopia.png)\n\n</div>\n\n<div>\n\n![monochromacy](color_test_monochromacy.png)\n\n</div>\n:::\n\nAt the end of this process, I ended up with this set of colors.\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Feature </th>\n   <th style=\"text-align:left;\"> Color Name </th>\n   <th style=\"text-align:left;\"> HEXCOL </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;color: white !important;background-color: #1E271A !important;\"> R Markdown Chunk </td>\n   <td style=\"text-align:left;color: white !important;background-color: #1E271A !important;\"> Darker Dark Green </td>\n   <td style=\"text-align:left;color: white !important;background-color: #1E271A !important;\"> #1E271A </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;color: white !important;background-color: #263121 !important;\"> Background </td>\n   <td style=\"text-align:left;color: white !important;background-color: #263121 !important;\"> Dark Green </td>\n   <td style=\"text-align:left;color: white !important;background-color: #263121 !important;\"> #263121 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;color: white !important;background-color: #353E31 !important;\"> Selection </td>\n   <td style=\"text-align:left;color: white !important;background-color: #353E31 !important;\"> Lighter Dark Green </td>\n   <td style=\"text-align:left;color: white !important;background-color: #353E31 !important;\"> #353E31 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;color: white !important;background-color: #353E31 !important;\"> Highlight </td>\n   <td style=\"text-align:left;color: white !important;background-color: #353E31 !important;\"> Lighter Dark Green </td>\n   <td style=\"text-align:left;color: white !important;background-color: #353E31 !important;\"> #353E31 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #85B258 !important;\"> Keyword Functions </td>\n   <td style=\"text-align:left;background-color: #85B258 !important;\"> Green </td>\n   <td style=\"text-align:left;background-color: #85B258 !important;\"> #85B258 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #C29CB7 !important;\"> Comment </td>\n   <td style=\"text-align:left;background-color: #C29CB7 !important;\"> Purple </td>\n   <td style=\"text-align:left;background-color: #C29CB7 !important;\"> #C29CB7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #CAD3C1 !important;\"> Number </td>\n   <td style=\"text-align:left;background-color: #CAD3C1 !important;\"> Dull </td>\n   <td style=\"text-align:left;background-color: #CAD3C1 !important;\"> #CAD3C1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #E9F5B9 !important;\"> String </td>\n   <td style=\"text-align:left;background-color: #E9F5B9 !important;\"> Yellow </td>\n   <td style=\"text-align:left;background-color: #E9F5B9 !important;\"> #E9F5B9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #FCFFFB !important;\"> Code </td>\n   <td style=\"text-align:left;background-color: #FCFFFB !important;\"> White </td>\n   <td style=\"text-align:left;background-color: #FCFFFB !important;\"> #FCFFFB </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #FCFFFB !important;\"> Keyword Operator </td>\n   <td style=\"text-align:left;background-color: #FCFFFB !important;\"> White </td>\n   <td style=\"text-align:left;background-color: #FCFFFB !important;\"> #FCFFFB </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #FFDFE5 !important;\"> Keyword Contants </td>\n   <td style=\"text-align:left;background-color: #FFDFE5 !important;\"> Pink </td>\n   <td style=\"text-align:left;background-color: #FFDFE5 !important;\"> #FFDFE5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;background-color: #FFDFE5 !important;\"> Python Meta </td>\n   <td style=\"text-align:left;background-color: #FFDFE5 !important;\"> Pink </td>\n   <td style=\"text-align:left;background-color: #FFDFE5 !important;\"> #FFDFE5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nI set up the RStudio theme using the [Making and Sharing Themes instructions](https://support.rstudio.com/hc/en-us/articles/115011846747-Using-RStudio-Themes#custom-editor-themes). The only change from the tmTheme to the rstheme is a manual edit to the R markdown chunk. The default was too bright, so the edit makes it a lot darker. There are still some areas of the IDE that can't be edited without more advance CSS. I will deal with that another time.\n\n![RStudio](screenshot.PNG)\n\n</br>\n\n![RStudio code](screenshot_code.PNG)\n\n</br>\n\n![RStudio R markdown](screenshot_markdown.PNG)\n\n<b> NOTE: This is for the old website design </b>\n\nThe color scheme was converted to CSS files for Hexo and highlight.js [here](https://github.com/WilliamTylerBradley/Calathea/tree/main/utilizations) using this [code](https://github.com/WilliamTylerBradley/Calathea/blob/main/r_code/create_css_files.R). To get these colors working syntax highlighting for blogdown, the custom CSS parameter needed to be set after moving the `calathea_hexo.css` to the CSS folder in static. The config file with these options:`[[params.customCSS]]` `href = \"css/calathea_hexo.css\"` will set up everything.\n\nFinally, to get the color scheme working with the correct R code syntax on the website, the files for R code syntax for highlight.js were downloaded from [here](https://cdnjs.com/libraries/highlight.js/) and moved to the js folder in the static folder. To have this blogdown theme use this JavaScript file, the config option `syntaxHighlighter = \"highlight.js\"` needed to be set. Then to get the r.min.js file working, the custom JavaScript parameter needed to be set, similar to the custom CSS option. The `[[params.customJS]]` `src = \"js/r.min.js\"` was put in the config file. SQL and Python are pre-built into the theme. However, a python.min.js file was adapted from [highlight.js 9.8.0 file](https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/python.min.js) with `None True False` moved to `literal` in order to get `None` to color successfully. The 9.8.0 version is needed to work with the current theme. This version number was found in the theme documentation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n################################\n## R code syntax highlighting ##\n################################\n\nlibrary(ggplot2)\n\ncentre <- function(x, type, ...) {\n  switch(type,\n         mean = mean(x),\n         median = median(x),\n         trimmed = mean(x, trim = .1))\n}\n\nmyVar1\nmyVar.2\ndata$x\nfoo \"bar\" baz\n# test \"test\"\n\"test # test\"\n\n(123) (1) (10) (0.1) (.2) (1e-7)\n(1.2e+7) (2e) (3e+10) (0x0) (0xa)\n(0xabcdef1234567890) (123L) (1L)\n(0x10L) (10000000L) (1e6L) (1.1L)\n(1e-3L) (4123.381E-10i)\n(3.) (3.E10) # BUG: .E10 should be part of number\n\n# Numbers in some different contexts\n1L\n0x40\n.234\n3.\n1L + 30\nplot(cars, xlim=20)\nplot(cars, xlim=0x20)\nfoo<-30\nmy.data.3 <- read() # not a number\nc(1,2,3)\n1%%2\n\n\"this is a quote that spans\nmultiple lines\n\\\"\n\nis this still a quote? it should be.\n# even still!\n\n\" # now we're done.\n\n'same for\nsingle quotes #'\n\n# keywords\nNULL, NA, TRUE, FALSE, Inf, NaN, NA_integer_,\nNA_real_, NA_character_, NA_complex_, function,\nwhile, repeat, for, if, in, else, next, break,\n..., ..1, ..2\n\n# not keywords\nthe quick brown fox jumped over the lazy dogs\nnull na true false inf nan na_integer_ na_real_\nna_character_ na_complex_ Function While Repeat\nFor If In Else Next Break .. .... \"NULL\" `NULL` 'NULL'\n\n# operators\n+, -, *, /, %%, ^, >, >=, <, <=, ==, !=, !, &, |, ~,\n->, <-, <<-, $, :, ::\n\n# infix operator\nfoo %union% bar\n%\"test\"%\n`\"test\"`\n```\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\n################################\n## Python syntax highlighting ##\n################################\n\n@requires_authorization\ndef somefunc(param1='', param2=0):\n    r'''A docstring'''\n    if param1 > param2: # interesting\n        print 'Gre\\'ater'\n    return (param2 - param1 + 1 + 0b10l) or None\n\nclass SomeClass:\n    pass\n\n>>> message = '''interpreter\n... prompt'''\n```\n:::\n\n::: {.cell}\n\n```{.sql .cell-code}\n/***************************/\n/* SQL syntax highlighting */\n/***************************/\n\nCREATE TABLE \"topic\" (\n    \"id\" serial NOT NULL PRIMARY KEY,\n    \"forum_id\" integer NOT NULL,\n    \"subject\" varchar(255) NOT NULL\n);\nALTER TABLE \"topic\"\nADD CONSTRAINT forum_id FOREIGN KEY (\"forum_id\")\nREFERENCES \"forum\" (\"id\");\n\n-- Initials\ninsert into \"topic\" (\"forum_id\", \"subject\")\nvalues (2, 'D''artagnian');\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}