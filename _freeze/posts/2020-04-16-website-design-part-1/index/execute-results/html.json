{
  "hash": "a82e6d844b562c05928252b734ff92ad",
  "result": {
    "markdown": "---\ntitle: 'Website Design: Part 1'\ndescription: \"This blog post and the next one cover the code for making the site images. The first post pulls the data, and the second one creates the images. The setup first pulls the contents from the [Data Science](https://en.wikipedia.org/wiki/Data_science) page of Wikipedia to get the letter frequencies. The code then pulls the overall letter frequencies for the English language. Finally, it saves them together to graph later.\"\ndate: \"2020-04-16\"\ncategories: [R, Blog]\nimage: \"ds_letter_thumbnail.png\"\nexecute: \n  eval: false\n---\n\n\n<b>NOTE: This post is about the old blog design. The images are not used on this site.</b>\n\nThis blog post and the next one cover the code for making the site images. The first post pulls the data, and the second one creates the images. The setup first pulls the contents from the [Data Science](https://en.wikipedia.org/wiki/Data_science) page of Wikipedia to get the letter frequencies. The code then pulls the overall letter frequencies for the English language. Finally, it saves them together to graph later.\n\nThis first section just lists out the R libraries. The `here` and `ggplot2` libraries are standard for most of my projects. The main additional library is `rvest`, which pulls the content from web pages.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#----------\n# Libraries\n#----------\n\n# Set up\nlibrary(here)\nlibrary(ggplot2)\n\n# Library for getting html\nlibrary(rvest)\nhelp(html_text)\n```\n:::\n\n\nThe second section pulls the Data Science Wikipedia page, cleans up the result a little, and graphs the data to check it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#--------------------\n# 'Data Science' data\n#--------------------\n\n# Scrape the Data Science data\ndata_science <- read_html(\"https://en.wikipedia.org/wiki/Data_science\")\n\n# Pull out main title\nheading1 <- html_text(html_nodes(data_science, \"h1\"))\nheading1\n\n# Pull out body text\nbody <- html_text(html_nodes(data_science, \"p\"))\nhead(body)\n\n# Add main title\nbody[1] <- paste(heading1, body[1])\nbody[1]\n\n# Crush together\nbody <- paste(body, collapse = \" \")\n\n# barplot of counts\nds_letter <- data.frame(table(\n  strsplit(tolower(gsub(\"[^[:alpha:]]\", \"\", body)), \"\")))\nnames(ds_letter) <- c(\"Letter\", \"Frequency\")\nds_letter$Frequency <- ds_letter$Frequency / sum(ds_letter$Frequency) * 100\nds_letter\n\nggplot(data = ds_letter, aes(Letter, Frequency)) +\n  geom_bar(stat = \"identity\") +\n  ggtitle(\"Data Science Wikipedia Page\")\nggsave(filename = here::here(\"images\", \"ds_letter.png\"))\n```\n:::\n\n\n![](ds_letter.png)\n\nThe next section is like the previous one. Instead of pulling the text from a Wikipedia page, the code pulls data out of a table for letter frequencies.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#---------------\n# Overall data\n#---------------\n\n# Get overall letter counts page\nletter_frequency <-\n  xml2::read_html(\"https://en.wikipedia.org/wiki/Letter_frequency\")\n\n# Find the right table\n# Thanks Robert Lewand and Pavel Micka\ntables <- html_nodes(letter_frequency, \"table\")\noverall_letter <- html_table(tables[1], fill = TRUE)[[1]]\noverall_letter <- overall_letter[c(1, 3)]\nnames(overall_letter) <- c(\"Letter\", \"Frequency\")\noverall_letter\n\nggplot(data = overall_letter, aes(Letter, Frequency)) +\n  geom_bar(stat = \"identity\") +\n  ggtitle(\"Overall\")\nggsave(filename = here::here(\"images\", \"overall_letter.png\"))\n```\n:::\n\n\n![](overall_letter.png)\n\nThe last two sections combine the data and save it for future use.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#-------------\n# Combine data\n#-------------\noverall_letter$Source <- \"Overall\"\nds_letter$Source <- \"Data Science\"\nfreqs <- rbind(overall_letter, ds_letter)\nfreqs\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n<caption>The final data set</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Letter </th>\n   <th style=\"text-align:right;\"> Frequency </th>\n   <th style=\"text-align:left;\"> Source </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> a </td>\n   <td style=\"text-align:right;\"> 8.50 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> b </td>\n   <td style=\"text-align:right;\"> 1.49 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> c </td>\n   <td style=\"text-align:right;\"> 2.20 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> d </td>\n   <td style=\"text-align:right;\"> 4.25 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> e </td>\n   <td style=\"text-align:right;\"> 11.16 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> f </td>\n   <td style=\"text-align:right;\"> 2.23 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> g </td>\n   <td style=\"text-align:right;\"> 2.02 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> h </td>\n   <td style=\"text-align:right;\"> 6.09 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> i </td>\n   <td style=\"text-align:right;\"> 7.55 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> j </td>\n   <td style=\"text-align:right;\"> 0.15 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> k </td>\n   <td style=\"text-align:right;\"> 1.29 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> l </td>\n   <td style=\"text-align:right;\"> 4.03 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> m </td>\n   <td style=\"text-align:right;\"> 2.41 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> n </td>\n   <td style=\"text-align:right;\"> 6.75 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> o </td>\n   <td style=\"text-align:right;\"> 7.51 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> p </td>\n   <td style=\"text-align:right;\"> 1.93 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> q </td>\n   <td style=\"text-align:right;\"> 0.10 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> r </td>\n   <td style=\"text-align:right;\"> 7.59 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> s </td>\n   <td style=\"text-align:right;\"> 6.33 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> t </td>\n   <td style=\"text-align:right;\"> 9.36 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> u </td>\n   <td style=\"text-align:right;\"> 2.76 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> v </td>\n   <td style=\"text-align:right;\"> 0.98 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> w </td>\n   <td style=\"text-align:right;\"> 2.56 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> x </td>\n   <td style=\"text-align:right;\"> 0.15 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> y </td>\n   <td style=\"text-align:right;\"> 1.99 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> z </td>\n   <td style=\"text-align:right;\"> 0.08 </td>\n   <td style=\"text-align:left;\"> Overall </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> a </td>\n   <td style=\"text-align:right;\"> 10.72 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> b </td>\n   <td style=\"text-align:right;\"> 1.31 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> c </td>\n   <td style=\"text-align:right;\"> 5.06 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> d </td>\n   <td style=\"text-align:right;\"> 5.08 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> e </td>\n   <td style=\"text-align:right;\"> 11.53 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> f </td>\n   <td style=\"text-align:right;\"> 2.01 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> g </td>\n   <td style=\"text-align:right;\"> 1.94 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> h </td>\n   <td style=\"text-align:right;\"> 2.87 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> i </td>\n   <td style=\"text-align:right;\"> 9.38 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> j </td>\n   <td style=\"text-align:right;\"> 0.22 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> k </td>\n   <td style=\"text-align:right;\"> 0.34 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> l </td>\n   <td style=\"text-align:right;\"> 3.65 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> m </td>\n   <td style=\"text-align:right;\"> 2.31 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> n </td>\n   <td style=\"text-align:right;\"> 8.21 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> o </td>\n   <td style=\"text-align:right;\"> 5.88 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> p </td>\n   <td style=\"text-align:right;\"> 1.77 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> q </td>\n   <td style=\"text-align:right;\"> 0.19 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> r </td>\n   <td style=\"text-align:right;\"> 4.97 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> s </td>\n   <td style=\"text-align:right;\"> 7.71 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> t </td>\n   <td style=\"text-align:right;\"> 9.50 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> u </td>\n   <td style=\"text-align:right;\"> 2.01 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> v </td>\n   <td style=\"text-align:right;\"> 0.72 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> w </td>\n   <td style=\"text-align:right;\"> 1.02 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> x </td>\n   <td style=\"text-align:right;\"> 0.15 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> y </td>\n   <td style=\"text-align:right;\"> 1.26 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> z </td>\n   <td style=\"text-align:right;\"> 0.19 </td>\n   <td style=\"text-align:left;\"> Data Science </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save the file in case it's needed later after Wikipedia updates\nwrite.csv(freqs,\n          file = here::here(\"freqs.csv\"),\n          row.names = FALSE)\n```\n:::\n\n\nThe source code file is found [here](https://github.com/WilliamTylerBradley/site_design/blob/master/scrape_wiki.R). This data will be read back into R to create the images in the [next post](https://www.willtybrad.com/2020-04-16-website-design-part-2/).\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}